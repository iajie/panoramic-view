import { AbstractToolbar } from "./AbstractToolbar.ts";

export class Import extends AbstractToolbar {

    constructor() {
        super();
        this.template = `<div>
            <input type="file" id="t-pano-toolbar-import" accept=".xml" style="display: none" />
            <svg t="1741227588990" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20413" width="200" height="200"><path d="M803.94856771 853.98242188h-214.45312501c-49.13085938 0-89.03320313-39.90234375-89.03320312-89.03320313S540.36458334 675.91601563 589.49544271 675.91601563h214.45312499c49.13085938 0 89.03320313 39.90234375 88.94531251 89.12109374 0 49.04296875-39.81445313 88.85742188-88.9453125 88.9453125z" fill="#1792E5" p-id="20414"></path><path d="M838.0501302 816.54101563H228.26497395V206.75585937H499.05598958V148.66015625H213.76302083c-23.99414063 0.08789063-43.50585938 19.51171875-43.59375 43.59375V831.04296875c0.08789063 23.99414063 19.51171875 43.50585938 43.59375 43.50585938h638.78906249c23.99414063-0.08789063 43.50585938-19.51171875 43.59375001-43.50585938V535.99414063h-58.09570313v280.54687499z" fill="#424242" p-id="20415"></path><path d="M852.55208334 885.97460938H213.76302083c-30.234375 0-54.93164063-24.609375-55.01953125-54.93164063V192.25390625c0.08789063-30.234375 24.78515625-54.93164063 55.01953125-55.01953125H510.48177083v80.94726563H239.6907552v586.93359375h586.93359375V524.56835938h80.94726563V831.04296875c-0.08789063 30.234375-24.78515625 54.84375001-55.01953124 54.93164063zM213.76302083 160.0859375c-17.66601563 0.08789063-32.08007813 14.50195313-32.16796875 32.16796875V831.04296875c0.08789063 17.66601563 14.50195313 32.08007813 32.16796875 32.08007813h638.78906249c17.66601563-0.08789063 32.08007813-14.50195313 32.16796876-32.08007813V547.41992188h-35.24414063v280.54687499H216.8391927V195.33007812H487.63020833v-35.24414062H213.76302083z" fill="#424242" p-id="20416"></path><path d="M867.05403646 725.75c-15.99609375-0.08789063-28.91601563-13.0078125-29.00390626-29.00390625V526.15039063c0-15.99609375 13.0078125-29.00390625 29.00390624-29.00390626s29.00390625 13.0078125 29.00390626 29.00390626v170.59570312c0.08789063 15.99609375-12.83203125 28.91601563-28.74023437 29.00390625h-0.26367189z" fill="#424242" p-id="20417"></path><path d="M867.05403646 737.17578125c-22.23632813-0.08789063-40.34179689-18.19335938-40.42968751-40.34179688V526.15039063c0-22.32421875 18.10546875-40.4296875 40.42968749-40.4296875s40.4296875 18.10546875 40.42968751 40.42968749v170.59570313c0.08789063 22.1484375-17.84179689 40.34179689-40.078125 40.4296875h-0.35156251z m-2e-8-22.8515625h0.26367189c9.58007813-0.08789063 17.40234375-7.91015625 17.31445312-17.49023438V526.15039063c0-9.66796875-7.91015625-17.578125-17.57812501-17.57812501s-17.578125 7.91015625-17.57812499 17.57812501v170.59570312c0.08789063 9.58007813 7.91015625 17.49023438 17.57812499 17.578125zM518.65559895 206.75585937h-76.20117187c-15.99609375 0-29.00390625-13.0078125-29.00390625-29.00390624s13.0078125-29.00390625 29.00390625-29.00390625h76.20117188c15.99609375 0 29.00390625 13.0078125 29.00390624 29.00390625s-13.0078125 29.00390625-29.00390625 29.00390625z" fill="#424242" p-id="20418"></path><path d="M518.65559895 218.18164062h-76.20117187c-22.32421875 0-40.4296875-18.10546875-40.4296875-40.42968749s18.10546875-40.4296875 40.4296875-40.4296875h76.20117188c22.32421875 0 40.4296875 18.10546875 40.42968749 40.4296875s-18.10546875 40.4296875-40.4296875 40.4296875z m-76.20117187-58.00781249c-9.66796875 0-17.578125 7.91015625-17.578125 17.578125s7.91015625 17.578125 17.578125 17.578125h76.20117188c9.66796875 0 17.578125-7.91015625 17.57812499-17.578125s-7.91015625-17.578125-17.578125-17.578125h-76.20117187z" fill="#424242" p-id="20419"></path><path d="M675.10091146 587.234375H487.80598958c-16.43554688 0.26367188-29.97070313-12.83203125-30.234375-29.26757813s12.83203125-29.97070313 29.26757813-30.23437499H675.18880208c16.43554688-0.26367188 29.97070313 12.83203125 30.234375 29.26757812s-12.83203125 29.97070313-29.26757813 30.234375h-1.05468749z" fill="#424242" p-id="20420"></path><path d="M487.27864583 598.66015625c-10.72265625 0-20.91796875-4.13085938-28.65234375-11.6015625-7.91015625-7.64648438-12.39257813-17.9296875-12.56835938-28.91601563-0.17578125-10.98632813 3.95507813-21.4453125 11.60156251-29.26757812 7.64648438-7.91015625 17.9296875-12.39257813 28.91601562-12.56835938h188.4375c10.98632813-0.17578125 21.35742188 3.95507813 29.1796875 11.60156251 7.91015625 7.64648438 12.39257813 17.9296875 12.56835938 28.91601562 0.3515625 22.67578125-17.84179689 41.484375-40.51757813 41.8359375h-188.96484375z m-0.35156251-59.50195314c-10.10742188 0.17578125-18.10546875 8.52539063-17.92968749 18.63281251 0.08789063 4.921875 2.02148438 9.4921875 5.53710938 12.83203125 3.515625 3.42773438 8.17382813 5.2734375 13.09570312 5.18554688H676.06770833c10.10742188-0.17578125 18.10546875-8.52539063 17.9296875-18.6328125-0.08789063-4.921875-2.02148438-9.4921875-5.53710938-12.83203126-3.515625-3.42773438-8.17382813-5.2734375-13.00781249-5.18554688H486.92708332z" fill="#424242" p-id="20421"></path><path d="M458.0110677 557.43945313V370.14453125c0.26367188-16.43554688 13.79882813-29.53125001 30.23437501-29.26757813 16.08398438 0.26367188 29.00390625 13.18359375 29.26757812 29.26757813v187.29492188c-0.26367188 16.43554688-13.79882813 29.53125001-30.234375 29.26757812-16.08398438-0.26367188-29.00390625-13.18359375-29.26757812-29.26757813z" fill="#424242" p-id="20422"></path><path d="M487.80598958 598.1328125h-0.703125c-22.32421875-0.3515625-40.16601563-18.19335938-40.51757813-40.51757813V369.96874999c0.3515625-22.67578125 19.16015625-40.86914063 41.8359375-40.51757812 22.32421875 0.3515625 40.16601563 18.19335938 40.51757813 40.51757814v187.64648437c-0.17578125 10.98632813-4.65820313 21.26953125-12.56835938 28.91601563-7.734375 7.47070313-17.84179689 11.6015625-28.56445312 11.60156249z m-18.36914063-40.78125c0.17578125 9.93164063 8.0859375 17.75390625 18.01757813 17.92968749 4.921875 0.08789063 9.4921875-1.7578125 13.0078125-5.18554688 3.515625-3.42773438 5.44921875-7.91015625 5.53710938-12.74414061V370.23242187c-0.17578125-9.93164063-8.0859375-17.75390625-18.01757813-17.92968749-10.10742188-0.17578125-18.45703125 7.91015625-18.6328125 17.9296875v187.11914062z" fill="#424242" p-id="20423"></path><path d="M466.71223958 578.53320313l-0.3515625-0.35156251c-11.25-11.16210938-11.25-29.35546875-0.08789063-40.60546875l0.08789063-0.08789062 380.390625-380.390625c11.16210938-11.25 29.35546875-11.25 40.60546875-0.08789063l0.08789063 0.08789063 0.3515625 0.3515625c11.25 11.16210938 11.25 29.35546875 0.08789062 40.60546875l-0.08789062 0.08789063-380.39062501 380.39062498c-11.25 11.25-29.35546875 11.25-40.69335937 2e-8 0.08789063 0 0 0 0 0z" fill="#424242" p-id="20424"></path><path d="M487.10286458 598.30859375c-10.28320313 0-20.56640625-3.8671875-28.38867188-11.68945313l-0.08789062-0.08789063-0.3515625-0.35156249c-15.64453125-15.55664063-15.73242188-41.04492188-0.08789062-56.68945313L838.66536458 149.01171875c7.55859375-7.55859375 17.578125-11.77734375 28.30078125-11.77734375h0.08789063c10.72265625 0 20.7421875 4.13085938 28.30078124 11.68945313l0.43945313 0.43945312c15.64453125 15.55664063 15.73242188 40.95703125 0.08789063 56.68945313l-0.17578125 0.17578125-380.21484377 380.39062499c-7.82226563 7.82226563-18.10546875 11.68945313-28.38867186 11.68945313zM475.2376302 570.88671875c6.94335938 6.41601563 17.40234375 6.328125 24.08203125-0.43945313l380.47851563-380.47851563c6.6796875-6.76757813 6.6796875-17.66601563-0.08789063-24.43359374l-0.43945312-0.43945312c-3.25195313-3.25195313-7.64648438-5.00976563-12.21679689-5.00976563-4.65820313 0-8.96484375 1.84570313-12.21679686 5.09765625L474.35872395 545.66210938c-6.6796875 6.6796875-6.6796875 17.578125-0.08789062 24.2578125 0.3515625 0.26367188 0.61523438 0.61523438 0.96679687 0.96679687z" fill="#424242" p-id="20425"></path></svg>
        </div>`;
        this.registerClickListener();
    }

    onClick() {
        const fileInput = document.getElementById("t-pano-toolbar-import");
        if (fileInput) {
            fileInput.click();
            fileInput.onchange = this.handleFileChange;
        }
    }

    async handleFileChange(e: Event) {
        const target = e.target as HTMLInputElement;
        const file = target.files?.[0];
        if (file) {
            try {
            } catch (error) {
            } finally {
                target.value = ""; // 清空input，允许重复选择同一文件
            }
        }
    }
}